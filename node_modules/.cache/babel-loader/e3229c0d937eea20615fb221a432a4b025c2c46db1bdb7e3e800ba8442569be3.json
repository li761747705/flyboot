{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"language-switcher\"\n};\nconst _hoisted_2 = {\n  class: \"dropdown\"\n};\nconst _hoisted_3 = {\n  class: \"btn btn-link dropdown-toggle text-decoration-none text-white\",\n  type: \"button\",\n  id: \"languageDropdown\",\n  \"data-bs-toggle\": \"dropdown\",\n  \"aria-expanded\": \"false\"\n};\nconst _hoisted_4 = {\n  class: \"dropdown-menu dropdown-menu-end\",\n  \"aria-labelledby\": \"languageDropdown\"\n};\nconst _hoisted_5 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"button\", _hoisted_3, [_cache[0] || (_cache[0] = _createElementVNode(\"i\", {\n    class: \"bi bi-globe me-1\"\n  }, null, -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($setup.getCurrentLanguageName()), 1 /* TEXT */)]), _createElementVNode(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.supportedLocales, locale => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: locale.code\n    }, [_createElementVNode(\"a\", {\n      class: _normalizeClass([\"dropdown-item\", {\n        active: $setup.currentLocale === locale.code\n      }]),\n      href: \"#\",\n      onClick: _withModifiers($event => $setup.changeLocale(locale.code), [\"prevent\"])\n    }, _toDisplayString(locale.name), 11 /* TEXT, CLASS, PROPS */, _hoisted_5)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","type","id","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createTextVNode","_toDisplayString","$setup","getCurrentLanguageName","_hoisted_4","_Fragment","_renderList","supportedLocales","locale","key","code","_normalizeClass","active","currentLocale","href","onClick","_withModifiers","$event","changeLocale","name","_hoisted_5"],"sources":["C:\\Users\\Administrator\\Desktop\\flyboot\\src\\components\\LanguageSwitcher.vue"],"sourcesContent":["<template>\r\n  <div class=\"language-switcher\">\r\n    <div class=\"dropdown\">\r\n      <button \r\n        class=\"btn btn-link dropdown-toggle text-decoration-none text-white\" \r\n        type=\"button\" \r\n        id=\"languageDropdown\" \r\n        data-bs-toggle=\"dropdown\" \r\n        aria-expanded=\"false\"\r\n      >\r\n        <i class=\"bi bi-globe me-1\"></i> {{ getCurrentLanguageName() }}\r\n      </button>\r\n      <ul class=\"dropdown-menu dropdown-menu-end\" aria-labelledby=\"languageDropdown\">\r\n        <li v-for=\"locale in supportedLocales\" :key=\"locale.code\">\r\n          <a \r\n            class=\"dropdown-item\" \r\n            href=\"#\" \r\n            @click.prevent=\"changeLocale(locale.code)\"\r\n            :class=\"{ active: currentLocale === locale.code }\"\r\n          >\r\n            {{ locale.name }}\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, watch } from 'vue'\r\nimport { useI18n } from 'vue-i18n'\r\nimport { SUPPORTED_LOCALES, setLocale } from '@/i18n'\r\n\r\nexport default {\r\n  name: 'LanguageSwitcher',\r\n  setup() {\r\n    const { locale } = useI18n()\r\n    const currentLocale = computed(() => locale.value)\r\n    const supportedLocales = ref(SUPPORTED_LOCALES)\r\n    \r\n    // 切换语言\r\n    const changeLocale = (code) => {\r\n      if (code !== currentLocale.value) {\r\n        locale.value = code\r\n        setLocale(code)\r\n        \r\n        // 保存到本地存储\r\n        localStorage.setItem('locale', code)\r\n        \r\n        // 更新HTML文档的lang和dir属性\r\n        document.documentElement.setAttribute('lang', code)\r\n        if (code === 'ar') {\r\n          document.documentElement.setAttribute('dir', 'rtl')\r\n          document.body.classList.add('rtl')\r\n        } else {\r\n          document.documentElement.setAttribute('dir', 'ltr')\r\n          document.body.classList.remove('rtl')\r\n        }\r\n      }\r\n    }\r\n    \r\n    // 获取当前语言名称\r\n    const getCurrentLanguageName = () => {\r\n      const current = supportedLocales.value.find(l => l.code === currentLocale.value)\r\n      return current ? current.name : '语言'\r\n    }\r\n    \r\n    // 监听locale变化，确保所有组件都响应语言变化\r\n    watch(locale, (newLocale) => {\r\n      if (newLocale !== localStorage.getItem('locale')) {\r\n        setLocale(newLocale)\r\n      }\r\n    })\r\n    \r\n    // 组件挂载时确保语言设置正确\r\n    onMounted(() => {\r\n      const savedLocale = localStorage.getItem('locale') || 'zh-CN'\r\n      if (locale.value !== savedLocale) {\r\n        locale.value = savedLocale\r\n        setLocale(savedLocale)\r\n      }\r\n    })\r\n    \r\n    return {\r\n      currentLocale,\r\n      supportedLocales,\r\n      changeLocale,\r\n      getCurrentLanguageName\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.language-switcher {\r\n  position: relative;\r\n  z-index: 1000;\r\n}\r\n\r\n.dropdown-menu {\r\n  min-width: 150px;\r\n  padding: 0.5rem 0;\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.dropdown-item {\r\n  padding: 0.5rem 1rem;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.dropdown-item.active,\r\n.dropdown-item:active {\r\n  background-color: #2D0A81;\r\n  color: white;\r\n}\r\n\r\n/* RTL支持 */\r\n:global(.rtl) .me-1 {\r\n  margin-right: 0 !important;\r\n  margin-left: 0.25rem !important;\r\n}\r\n\r\n:global(.rtl) .dropdown-menu-end {\r\n  right: auto;\r\n  left: 0;\r\n}\r\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAmB;;EACvBA,KAAK,EAAC;AAAU;;EAEjBA,KAAK,EAAC,8DAA8D;EACpEC,IAAI,EAAC,QAAQ;EACbC,EAAE,EAAC,kBAAkB;EACrB,gBAAc,EAAC,UAAU;EACzB,eAAa,EAAC;;;EAIZF,KAAK,EAAC,iCAAiC;EAAC,iBAAe,EAAC;;mBAZlE;;uBACEG,mBAAA,CAwBM,OAxBNC,UAwBM,GAvBJC,mBAAA,CAsBM,OAtBNC,UAsBM,GArBJD,mBAAA,CAQS,UARTE,UAQS,G,0BADPF,mBAAA,CAAgC;IAA7BL,KAAK,EAAC;EAAkB,6BAVnCQ,gBAAA,CAUwC,GAAC,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,sBAAsB,mB,GAE5DN,mBAAA,CAWK,MAXLO,UAWK,I,kBAVHT,mBAAA,CASKU,SAAA,QAtBbC,WAAA,CAa6BJ,MAAA,CAAAK,gBAAgB,EAA1BC,MAAM;yBAAjBb,mBAAA,CASK;MATmCc,GAAG,EAAED,MAAM,CAACE;QAClDb,mBAAA,CAOI;MANFL,KAAK,EAfjBmB,eAAA,EAekB,eAAe;QAAAC,MAAA,EAGHV,MAAA,CAAAW,aAAa,KAAKL,MAAM,CAACE;MAAI;MAF/CI,IAAI,EAAC,GAAG;MACPC,OAAK,EAjBlBC,cAAA,CAAAC,MAAA,IAiB4Bf,MAAA,CAAAgB,YAAY,CAACV,MAAM,CAACE,IAAI;wBAGrCF,MAAM,CAACW,IAAI,gCApB1BC,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}